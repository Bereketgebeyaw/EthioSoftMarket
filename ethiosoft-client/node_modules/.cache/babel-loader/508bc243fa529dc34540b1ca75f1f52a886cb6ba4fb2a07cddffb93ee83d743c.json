{"ast":null,"code":"import React,{useState}from'react';import{authService}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginForm=_ref=>{let{onSuccess,onSwitchToRegister}=_ref;const[formData,setFormData]=useState({Email:'',Password:''});const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});setError('');// Clear error when user types\n};const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');try{const response=await authService.login(formData);console.log('Full login response:',response);console.log('User data being stored:',response.user);console.log('User role:',response.user.role);localStorage.setItem('token',response.token);localStorage.setItem('user',JSON.stringify(response.user));onSuccess(response.user);}catch(err){var _err$response,_err$response$data;console.error('Login error:',err);if((_err$response=err.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.message){setError(err.response.data.message);}else{setError('Login failed. Please check your credentials.');}}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"Email\",name:\"Email\",value:formData.Email,onChange:handleChange,required:true,placeholder:\"Enter your email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"Password\",name:\"Password\",value:formData.Password,onChange:handleChange,required:true,placeholder:\"Enter your password\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"auth-button\",children:isLoading?'Signing In...':'Sign In'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-switch\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onSwitchToRegister,className:\"link-button\",children:\"Register\"})]})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","authService","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","onSuccess","onSwitchToRegister","formData","setFormData","Email","Password","error","setError","isLoading","setIsLoading","handleChange","e","target","name","value","handleSubmit","preventDefault","response","login","console","log","user","role","localStorage","setItem","token","JSON","stringify","err","_err$response","_err$response$data","data","message","className","children","onSubmit","htmlFor","type","id","onChange","required","placeholder","disabled","onClick"],"sources":["/Users/mac/Desktop/EthioSoft-Marketplace/ethiosoft-client/src/components/auth/LoginForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { authService } from '../../services/api';\n\nconst LoginForm = ({ onSuccess, onSwitchToRegister }) => {\n  const [formData, setFormData] = useState({\n    Email: '',\n    Password: ''\n  });\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    setError(''); // Clear error when user types\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    try {\n      const response = await authService.login(formData);\n      console.log('Full login response:', response);\n      console.log('User data being stored:', response.user);\n      console.log('User role:', response.user.role);\n      localStorage.setItem('token', response.token);\n      localStorage.setItem('user', JSON.stringify(response.user));\n      onSuccess(response.user);\n    } catch (err) {\n      console.error('Login error:', err);\n      if (err.response?.data?.message) {\n        setError(err.response.data.message);\n      } else {\n        setError('Login failed. Please check your credentials.');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"auth-form\">\n      <h2>Sign In</h2>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"Email\">Email</label>\n          <input\n            type=\"email\"\n            id=\"Email\"\n            name=\"Email\"\n            value={formData.Email}\n            onChange={handleChange}\n            required\n            placeholder=\"Enter your email\"\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"Password\">Password</label>\n          <input\n            type=\"password\"\n            id=\"Password\"\n            name=\"Password\"\n            value={formData.Password}\n            onChange={handleChange}\n            required\n            placeholder=\"Enter your password\"\n          />\n        </div>\n\n        {error && <div className=\"error-message\">{error}</div>}\n\n        <button type=\"submit\" disabled={isLoading} className=\"auth-button\">\n          {isLoading ? 'Signing In...' : 'Sign In'}\n        </button>\n      </form>\n\n      <div className=\"auth-switch\">\n        Don't have an account?{' '}\n        <button type=\"button\" onClick={onSwitchToRegister} className=\"link-button\">\n          Register\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}