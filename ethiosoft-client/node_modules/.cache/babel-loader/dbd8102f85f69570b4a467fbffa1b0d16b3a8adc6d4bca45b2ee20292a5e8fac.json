{"ast":null,"code":"import React,{useState}from'react';import{authService}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterForm=_ref=>{let{onSuccess,onSwitchToLogin}=_ref;const[formData,setFormData]=useState({Email:'',Password:'',FullName:'',Role:'Buyer'});const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const[registrationSuccess,setRegistrationSuccess]=useState(false);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});setError('');// Clear error when user types\n};const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');try{await authService.register(formData);setRegistrationSuccess(true);// Don't automatically log in - redirect to login page\nsetTimeout(()=>{onSwitchToLogin();},2000);// Show success message for 2 seconds then redirect\n}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;console.error('Registration error:',err);if((_err$response=err.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.errors){// Display specific validation errors\nconst errorMessages=err.response.data.errors.map(error=>error.description).join(', ');setError(`Registration failed: ${errorMessages}`);}else if((_err$response2=err.response)!==null&&_err$response2!==void 0&&(_err$response2$data=_err$response2.data)!==null&&_err$response2$data!==void 0&&_err$response2$data.message){setError(err.response.data.message);}else{setError('Registration failed. Please try again.');}}finally{setIsLoading(false);}};if(registrationSuccess){return/*#__PURE__*/_jsx(\"div\",{className:\"auth-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"success-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registration Successful! \\uD83C\\uDF89\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your account has been created successfully.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Redirecting you to login page...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Account\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"FullName\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"FullName\",name:\"FullName\",value:formData.FullName,onChange:handleChange,required:true,placeholder:\"Enter your full name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"Email\",name:\"Email\",value:formData.Email,onChange:handleChange,required:true,placeholder:\"Enter your email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"Password\",name:\"Password\",value:formData.Password,onChange:handleChange,required:true,placeholder:\"Enter your password\"}),/*#__PURE__*/_jsx(\"small\",{className:\"password-requirements\",children:\"Password must contain at least 6 characters, including uppercase, lowercase, and a digit.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Role\",children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"Role\",name:\"Role\",value:formData.Role,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Buyer\",children:\"Buyer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Seller\",children:\"Seller\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Admin\",children:\"Admin\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"auth-button\",children:isLoading?'Creating Account...':'Register'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-switch\",children:[\"Already have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onSwitchToLogin,className:\"link-button\",children:\"Sign In\"})]})]});};export default RegisterForm;","map":{"version":3,"names":["React","useState","authService","jsx","_jsx","jsxs","_jsxs","RegisterForm","_ref","onSuccess","onSwitchToLogin","formData","setFormData","Email","Password","FullName","Role","error","setError","isLoading","setIsLoading","registrationSuccess","setRegistrationSuccess","handleChange","e","target","name","value","handleSubmit","preventDefault","register","setTimeout","err","_err$response","_err$response$data","_err$response2","_err$response2$data","console","response","data","errors","errorMessages","map","description","join","message","className","children","onSubmit","htmlFor","type","id","onChange","required","placeholder","disabled","onClick"],"sources":["/Users/mac/Desktop/EthioSoft-Marketplace/ethiosoft-client/src/components/auth/RegisterForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { authService } from '../../services/api';\n\nconst RegisterForm = ({ onSuccess, onSwitchToLogin }) => {\n  const [formData, setFormData] = useState({\n    Email: '',\n    Password: '',\n    FullName: '',\n    Role: 'Buyer'\n  });\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [registrationSuccess, setRegistrationSuccess] = useState(false);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    setError(''); // Clear error when user types\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    try {\n      await authService.register(formData);\n      setRegistrationSuccess(true);\n      // Don't automatically log in - redirect to login page\n      setTimeout(() => {\n        onSwitchToLogin();\n      }, 2000); // Show success message for 2 seconds then redirect\n    } catch (err) {\n      console.error('Registration error:', err);\n      if (err.response?.data?.errors) {\n        // Display specific validation errors\n        const errorMessages = err.response.data.errors.map(error => error.description).join(', ');\n        setError(`Registration failed: ${errorMessages}`);\n      } else if (err.response?.data?.message) {\n        setError(err.response.data.message);\n      } else {\n        setError('Registration failed. Please try again.');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (registrationSuccess) {\n    return (\n      <div className=\"auth-form\">\n        <div className=\"success-message\">\n          <h2>Registration Successful! ðŸŽ‰</h2>\n          <p>Your account has been created successfully.</p>\n          <p>Redirecting you to login page...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"auth-form\">\n      <h2>Create Account</h2>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"FullName\">Full Name</label>\n          <input\n            type=\"text\"\n            id=\"FullName\"\n            name=\"FullName\"\n            value={formData.FullName}\n            onChange={handleChange}\n            required\n            placeholder=\"Enter your full name\"\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"Email\">Email</label>\n          <input\n            type=\"email\"\n            id=\"Email\"\n            name=\"Email\"\n            value={formData.Email}\n            onChange={handleChange}\n            required\n            placeholder=\"Enter your email\"\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"Password\">Password</label>\n          <input\n            type=\"password\"\n            id=\"Password\"\n            name=\"Password\"\n            value={formData.Password}\n            onChange={handleChange}\n            required\n            placeholder=\"Enter your password\"\n          />\n          <small className=\"password-requirements\">\n            Password must contain at least 6 characters, including uppercase, lowercase, and a digit.\n          </small>\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"Role\">Role</label>\n          <select\n            id=\"Role\"\n            name=\"Role\"\n            value={formData.Role}\n            onChange={handleChange}\n            required\n          >\n            <option value=\"Buyer\">Buyer</option>\n            <option value=\"Seller\">Seller</option>\n            <option value=\"Admin\">Admin</option>\n          </select>\n        </div>\n\n        {error && <div className=\"error-message\">{error}</div>}\n\n        <button type=\"submit\" disabled={isLoading} className=\"auth-button\">\n          {isLoading ? 'Creating Account...' : 'Register'}\n        </button>\n      </form>\n\n      <div className=\"auth-switch\">\n        Already have an account?{' '}\n        <button type=\"button\" onClick={onSwitchToLogin} className=\"link-button\">\n          Sign In\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}